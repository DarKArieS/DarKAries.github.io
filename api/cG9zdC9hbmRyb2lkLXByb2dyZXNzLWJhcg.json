{"title":"æ¯”è¼ƒé…·ç‚«çš„è¨ˆé‡æ¢","date":"2019-01-14T06:03:05.000Z","slug":"android-progress-bar","comments":true,"tags":["Android native"],"categories":["Android Note"],"updated":"2019-01-15T14:24:35.130Z","content":"<h1 id=\"æ¯”è¼ƒé…·ç‚«çš„è¨ˆé‡æ¢\"><a class=\"header-anchor\" href=\"#æ¯”è¼ƒé…·ç‚«çš„è¨ˆé‡æ¢\">Â¶</a>æ¯”è¼ƒé…·ç‚«çš„è¨ˆé‡æ¢</h1>\n<p>æ‡‰ç”¨ç¨‹å¼ä¸­ï¼Œå…ä¸äº†éœ€è¦é€²åº¦æ¢ä¾†é¡¯ç¤ºå„ç¨®é€²åº¦ï¼Œåƒæ˜¯ä¸‹è¼‰é€²åº¦ã€è™•ç†é€²åº¦ç­‰ã€‚è€ŒéŠæˆ²ä¸­çš„è¨ˆé‡æ¢(ä¾‹å¦‚è¡€æ¢)ï¼Œåœ¨è®ŠåŒ–æ™‚æ›´æ˜¯éœ€è¦è¼”ä»¥é…·ç‚«çš„å‹•ç•«å¢é€²è¦–è¦ºæ•ˆæœã€‚</p>\n<p>é€™ç¯‡æ–‡ç« æœƒä½¿ç”¨android SDKåŸç”ŸåŠŸèƒ½ä»¥åŠProgressBarä¾†è£½ä½œéš¨è‘—å€’æ•¸è¨ˆæ™‚å™¨è®ŠåŒ–çš„è¨ˆé‡æ¢ï¼Œä¸¦ä¸”åœ¨å¢æ¸›æ™‚é–“æ™‚æœ‰é…·ç‚«çš„å‹•ç•«ã€‚</p>\n<p>é è¨ˆæœƒé”åˆ°å¦‚ä¸‹çš„æ•ˆæœï¼š</p>\n<ul>\n<li>ä¸€èˆ¬æƒ…å½¢ï¼š</li>\n</ul>\n<div class=\"article-img\"><p><img src=\"https://i.imgur.com/ys9a4wW.gif\" alt=\"\"></p></div>\n<ul>\n<li>\n<p>æ™‚é–“å¢åŠ ï¼šè¨ˆé‡æ¢é–ƒçˆï¼Œä¸¦ä¸”æœ‰åƒæ˜¯æ ¼é¬¥éŠæˆ²æ‰£è¡€æ™‚çš„å»¶é²å‹•ç•«<br>\n<img src=\"https://i.imgur.com/y1nU64V.gif\" alt=\"\"></p>\n</li>\n<li>\n<p>æ™‚é–“æ¸›å°‘ï¼šå€’æ‰£æ™‚è¨ˆé‡æ¢é»‘è‰²é–ƒçˆ<br>\n<img src=\"https://i.imgur.com/tPyiEIc.gif\" alt=\"\"></p>\n</li>\n</ul>\n<p>ç°¡å–®çš„ç¨‹å¼æ¶æ§‹å¦‚ä¸‹ï¼š</p>\n<div class=\"article-img\"><p><img src=\"https://i.imgur.com/UfGqUsA.png\" alt=\"\" width=\"300\" height=\"150\"></p></div>\n<ul>\n<li>\n<p>Activity/Fragmentä¸­çš„æŒ‰éˆ•é€å‡ºæ›´æ”¹å‰©é¤˜æ™‚é–“çš„è¨Šæ¯çµ¦Timerã€åŒæ™‚é€å‡ºæ’­æ”¾å‹•ç•«çš„è«‹æ±‚çµ¦Animator</p>\n</li>\n<li>\n<p>Timerè² è²¬å€’æ•¸è¨ˆæ™‚ï¼Œä¸¦è¦æ±‚Animatoræ›´æ–°Progress Bar</p>\n</li>\n<li>\n<p>Progress Barè¢«Animatoræ§åˆ¶ï¼Œé¡¯ç¤ºå‰©é¤˜æ™‚é–“ä»¥åŠæ’­æ”¾å‹•ç•«</p>\n</li>\n</ul>\n<p>åŸå§‹ç¢¼å¯ä»¥åœ¨<a href=\"https://github.com/DarKArieS/JettPuzzleGame2/tree/1.ProgressBar\" target=\"_blank\" rel=\"noopener\">é€™è£¡</a>æ‰¾åˆ°</p>\n<h2 id=\"è¨ˆé‡æ¢å¤–è§€è¨­ç½®\"><a class=\"header-anchor\" href=\"#è¨ˆé‡æ¢å¤–è§€è¨­ç½®\">Â¶</a>è¨ˆé‡æ¢å¤–è§€è¨­ç½®</h2>\n<p>åŸç”Ÿæä¾›çš„ProgressBarå…±æœ‰å…©ç¨®ç¹ªè£½å½¢å¼ï¼Œä¸€ç¨®æ˜¯è¨å­çš„è½‰åœˆåœˆï¼Œæˆ‘å€‘éœ€è¦çš„æ˜¯å¦ä¸€ç¨®é•·æ¢å½¢çš„ProgressBar Horizontalã€‚</p>\n<div class=\"article-img\"><p><img src=\"https://i.imgur.com/HKk4Ivu.gif\" alt=\"\"></p></div>\n<p>è€ŒProgressBaråˆæœ‰åˆ†æˆè¨ˆé‡å‹(Determinate)èˆ‡ç„¡é™<s>åƒåˆ°é£½</s>å‹(Indeterminate)ï¼Œæˆ‘å€‘éœ€è¦çš„æ˜¯è¨ˆé‡å‹ä¾†é¡¯ç¤ºé€²åº¦ã€‚</p>\n<div class=\"article-img\"><p><img src=\"https://i.imgur.com/gUgv83C.gif\" alt=\"\"></p></div>\n<p>å®˜æ–¹åŸç”Ÿåªæœ‰æä¾›æ°´å¹³é€²åº¦æ¢ã€‚å¦‚æœæƒ³ä½¿ç”¨åœ“å½¢å½¢å¼é¡¯ç¤ºé€²åº¦ï¼Œå¯ä»¥<a href=\"https://github.com/Hellobird/CircleSeekBar-For-Android\" target=\"_blank\" rel=\"noopener\">åƒè€ƒé€™è£¡</a>ã€‚</p>\n<p>åŸç”Ÿçš„æ¨£å¼æœ‰é»ç´°ï¼Œè®“æˆ‘å€‘é‡æ–°è¨­è¨ˆProgressBarçš„æ¨£å¼ã€‚<br>\nå»ºç«‹ä¸€å€‹time_bar.xmlï¼Œç¨‹å¼ç¢¼å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">layer-list</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">\"http://schemas.android.com/apk/res/android\"</span> &gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">android:id</span>=<span class=\"string\">\"@android:id/background\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">shape</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">corners</span> <span class=\"attr\">android:radius</span>=<span class=\"string\">\"5dip\"</span> /&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">solid</span> <span class=\"attr\">android:color</span>=<span class=\"string\">\"#88000000\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">shape</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">android:id</span>=<span class=\"string\">\"@android:id/secondaryProgress\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">clip</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">shape</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">corners</span> <span class=\"attr\">android:radius</span>=<span class=\"string\">\"5dip\"</span> /&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">gradient</span></span></span><br><span class=\"line\"><span class=\"tag\">                    <span class=\"attr\">android:angle</span>=<span class=\"string\">\"270\"</span></span></span><br><span class=\"line\"><span class=\"tag\">                    <span class=\"attr\">android:centerColor</span>=<span class=\"string\">\"#C6B7FF\"</span></span></span><br><span class=\"line\"><span class=\"tag\">                    <span class=\"attr\">android:centerY</span>=<span class=\"string\">\"0.75\"</span></span></span><br><span class=\"line\"><span class=\"tag\">                    <span class=\"attr\">android:endColor</span>=<span class=\"string\">\"#C3B2FF\"</span></span></span><br><span class=\"line\"><span class=\"tag\">                    <span class=\"attr\">android:startColor</span>=<span class=\"string\">\"#B9A4FF\"</span> /&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">shape</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">clip</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">android:id</span>=<span class=\"string\">\"@android:id/progress\"</span> &gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">clip</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">shape</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">corners</span> <span class=\"attr\">android:radius</span>=<span class=\"string\">\"5dip\"</span> /&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">gradient</span></span></span><br><span class=\"line\"><span class=\"tag\">                    <span class=\"attr\">android:angle</span>=<span class=\"string\">\"270\"</span></span></span><br><span class=\"line\"><span class=\"tag\">                    <span class=\"attr\">android:centerColor</span>=<span class=\"string\">\"#74EBFF\"</span></span></span><br><span class=\"line\"><span class=\"tag\">                    <span class=\"attr\">android:centerY</span>=<span class=\"string\">\"0.75\"</span></span></span><br><span class=\"line\"><span class=\"tag\">                    <span class=\"attr\">android:endColor</span>=<span class=\"string\">\"#8EEFFF\"</span></span></span><br><span class=\"line\"><span class=\"tag\">                    <span class=\"attr\">android:startColor</span>=<span class=\"string\">\"#57E8FF\"</span> /&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">shape</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">clip</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">layer-list</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>æ ¹æ“šå¤šæ–¹æ•™å­¸ä»¥åŠå®˜æ–¹æ–‡æª”ï¼ŒProgressBar Drawable xml å¿…é ˆç‚ºLayerDrawableï¼Œä¸¦åŒ…å«ä¸‰å€‹éƒ¨åˆ†ï¼šbackground(èƒŒæ™¯)ã€progress(ä¸»è¦é€²åº¦æ¢)ã€secondaryProgress(æ¬¡è¦é€²åº¦æ¢)</p>\n<p>é€²åº¦æ¢é¡¯ç¤ºè¨ˆé‡é€²åº¦æ˜¯ç”±clipDrawableæ§åˆ¶ï¼Œå› æ­¤progressä»¥åŠSecondaryProgresså¿…é ˆåŒ…åœ¨clip tagä¸­ã€‚</p>\n<p>å€¼å¾—æ³¨æ„çš„ä¸€é»æ˜¯ï¼Œé€™é‚Šçš„idå½¢å¼ç‚ºinternal IDï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">android:id=&quot;@android:id/progress</span><br></pre></td></tr></table></figure>\n<p>ï¼Œä¸¦éæˆ‘å€‘åœ¨layout xmlä¸­ä½¿ç”¨çš„IDï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">android:id=&quot;@+id/...</span><br></pre></td></tr></table></figure>\n<p>é€™é¡çš„idç‚ºandroid SDKå·²ç¶“äº‹å…ˆå®šç¾©å¥½ä¸¦ç”¨æ–¼SDKä¸­çš„å„å€‹ç‰©ä»¶ï¼Œç„¡æ³•éš¨æ„æ›´æ”¹ã€‚</p>\n<p>è¦å–å¾—æ“æœ‰è©²idçš„ç‰©ä»¶æ²’è¾¦æ³•ä¾é å¸¸ç”¨çš„getViewByIdï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">val</span> progressBarDrawable = (progressBar.progressDrawable <span class=\"keyword\">as</span> LayerDrawable)</span><br><span class=\"line\">        .findDrawableByLayerId(Resources.getSystem().getIdentifier(<span class=\"string\">\"progress\"</span>,<span class=\"string\">\"id\"</span>,<span class=\"string\">\"android\"</span>))</span><br></pre></td></tr></table></figure>\n<p>ç­‰æœƒå…’è£½ä½œ<a href=\"#1\">é–ƒçˆå‹•ç•«</a>æ™‚æœƒç”¨ä¸Šã€‚</p>\n<p>æœ€å¾Œï¼Œåœ¨layout xmlä¸­éœ€è¦æ³¨æ„çš„å…§å®¹å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ProgressBar</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/timerProgressBar\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:progressDrawable</span>=<span class=\"string\">\"@drawable/time_bar\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">style</span>=<span class=\"string\">\"@android:style/Widget.DeviceDefault.Light.ProgressBar.Horizontal\"</span>/&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"è¨ˆæ™‚å™¨\"><a class=\"header-anchor\" href=\"#è¨ˆæ™‚å™¨\">Â¶</a>è¨ˆæ™‚å™¨</h2>\n<p>å¯«ä¸€å€‹timer classï¼Œå…§å®¹å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> android.os.Handler</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">GameTimer</span></span>(<span class=\"keyword\">private</span> <span class=\"keyword\">var</span> timerBarController: GameTimer.TimerBarController)&#123;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">TimerBarController</span></span>&#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">timerOnUpdate</span><span class=\"params\">()</span></span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">timesUp</span><span class=\"params\">()</span></span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">var</span> secondsCount = <span class=\"number\">40f</span></span><br><span class=\"line\">    <span class=\"keyword\">var</span> maxTimeInSeconds = secondsCount</span><br><span class=\"line\">    <span class=\"keyword\">var</span> isOnStart = <span class=\"literal\">false</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">var</span> stopTimer = <span class=\"literal\">false</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">lateinit</span> <span class=\"keyword\">var</span> timerThread: Thread</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">var</span> handlerUI = Handler()</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">lateinit</span> <span class=\"keyword\">var</span> runnable: Runnable</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">startTimer</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(!isOnStart)&#123;</span><br><span class=\"line\">            isOnStart = <span class=\"literal\">true</span></span><br><span class=\"line\"></span><br><span class=\"line\">            timerThread = Thread&#123;</span><br><span class=\"line\">                <span class=\"keyword\">while</span>(secondsCount&gt;=<span class=\"number\">0</span> &amp;&amp; !stopTimer)&#123;</span><br><span class=\"line\">                    Thread.sleep(<span class=\"number\">10</span>) <span class=\"comment\">// 0.01 second</span></span><br><span class=\"line\">                    secondsCount -= <span class=\"number\">0.01f</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(!stopTimer)&#123;</span><br><span class=\"line\">                    handlerUI.post&#123;</span><br><span class=\"line\">                        timerBarController.timesUp()</span><br><span class=\"line\">                        stopTimer()</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                println(<span class=\"string\">\"timer thread end\"</span>)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            runnable = Runnable &#123;</span><br><span class=\"line\">                timerBarController.timerOnUpdate()</span><br><span class=\"line\">                handlerUI.postDelayed(runnable, <span class=\"number\">10</span>)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            stopTimer = <span class=\"literal\">false</span></span><br><span class=\"line\">            timerThread.start()</span><br><span class=\"line\">            handlerUI.postDelayed(runnable, <span class=\"number\">10</span>)</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">stopTimer</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">        stopTimer = <span class=\"literal\">true</span></span><br><span class=\"line\">        isOnStart = <span class=\"literal\">false</span></span><br><span class=\"line\">        handlerUI.removeCallbacks(runnable)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç•¶ä¸­è¨­è¨ˆäº†ä¸€å€‹ä»‹é¢è®“UIç«¯ç¨‹å¼å¯¦ä½œè¨ˆæ™‚å™¨åˆ°æœŸ(<code>fun timesUp()</code>)ä»¥åŠæ›´æ–°UI(<code>fun timerOnUpdate()</code>)ç­‰äº‹ä»¶ã€‚</p>\n<p>è¨ˆæ™‚çš„è™•ç†ç”±ä¸€å€‹threadè² è²¬ï¼Œæ¯0.01ç§’æœƒæ›´æ–°ä¸€æ¬¡æ•¸å€¼ã€‚æ›´æ–°UIçš„éƒ¨åˆ†å‰‡ä¸Ÿåˆ°handlerUIè™•ç†ã€‚<br>\nç”±æ–¼Threadä¸¦ä¸å»ºè­°è¢«éš¨æ„åœ°ä¸­æ­¢ï¼Œå› æ­¤åœ¨threadä¸­ç”±å¸ƒæ—å€¼<code>isOnStart</code>æ±ºå®šæ˜¯å¦åœæ­¢è©²è¨ˆæ™‚å™¨ã€‚</p>\n<p>å¯¦ä¾‹åŒ–è¨ˆæ™‚å™¨æ™‚ï¼Œå¯ä»¥ä¾ä¸åŒæƒ…å½¢é…åˆprogressBarè¨­ç½®ã€‚<br>\nåƒæ˜¯é€™å€‹æ¨£å­ï¼ŒåŒæ™‚è¨­å®šè¨ˆæ™‚å™¨ä»¥åŠprogressBarï¼š</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// setup timer</span></span><br><span class=\"line\"><span class=\"keyword\">val</span> timeThreshold = <span class=\"number\">40f</span></span><br><span class=\"line\">timer = GameTimer(<span class=\"keyword\">this</span>)</span><br><span class=\"line\">timer.secondsCount = timeThreshold</span><br><span class=\"line\">timer.maxTimeInSeconds = timeThreshold</span><br><span class=\"line\">rootView.timerProgressBar.max = (timeThreshold*<span class=\"number\">100</span>).toInt() <span class=\"comment\">// timer bar resolution: 0.01 second</span></span><br><span class=\"line\">rootView.timerProgressBar.progress = (timeThreshold*<span class=\"number\">100</span>).toInt()</span><br><span class=\"line\">rootView.timerProgressBar.secondaryProgress = (timeThreshold*<span class=\"number\">100</span>).toInt()</span><br></pre></td></tr></table></figure>\n<p>è¨ˆæ™‚å™¨æœ€å¤§å€¼ç‚º40ç§’ã€‚ç”±æ–¼æ¯0.01ç§’æœƒæ›´æ–°ä¸€æ¬¡è¨ˆæ™‚å™¨ï¼ŒprogressBarçš„æœ€å¤§å€¼ç‚º<code>40*100</code>ã€‚<br>\næ¯æ¬¡è¨ˆæ™‚å™¨æ›´æ–°progressBaræœƒä½¿progresså€¼æ¸›ä¸€ï¼Œåœ¨<a href=\"#progressBarUI\">progressBar UIæ›´æ–°</a>æœƒä½¿ç”¨åˆ°é€™å€‹ç‰¹æ€§ã€‚</p>\n<h2 id=\"å»¶é²å‹•ç•«\"><a class=\"header-anchor\" href=\"#å»¶é²å‹•ç•«\">Â¶</a>å»¶é²å‹•ç•«</h2>\n<p>å¯«ä¸€å€‹classï¼Œç•¶ä¸­å°è£äº†æ‰€éœ€è¦ç”¨åˆ°çš„ç‰©ä»¶ã€‚<br>\né€™é‚Šä¸»è¦è§£é‡‹ç¨‹å¼çš„æƒ³æ³•ï¼Œä¸æŠŠæ•´æ®µéƒ½è²¼å‡ºä¾†ã€‚<br>\næœ‰èˆˆè¶£çš„è©±è«‹æ´½<a href=\"https://github.com/DarKArieS/JettPuzzleGame2/tree/1.ProgressBar\" target=\"_blank\" rel=\"noopener\">å®Œæ•´ç¨‹å¼ç¢¼</a>ğŸ˜ƒ</p>\n<h3 id=\"progressBarUI\">progressBar UIæ›´æ–°</h3>\n<p>ç”±æ–¼åŸç”Ÿçš„è¨ˆé‡æ¢é¡¯ç¤ºæ˜¯ç”±clip levelæ‰€è¨­å®šï¼Œå› æ­¤å°‡é­åˆ°è®Šæ›´çš„progresså€¼æ›´æ–°åˆ°ç•«é¢ä¸Šæ˜¯ä¸€ç¬é–“çš„äº‹ã€‚<sup class=\"footnote-ref\"><a href=\"#fn1\" id=\"fnref1\">[1]</a></sup></p>\n<p>æ­¤è™•è—‰ç”±æ§åˆ¶progresså€¼çš„å¢æ¸›æ™‚æ©Ÿä¾†å¯¦ç¾å‹•ç•«æ•ˆæœã€‚</p>\n<p>é¦–å…ˆï¼Œtimerä¸­çš„<code>fun timerOnUpdate()</code>è² è²¬æ›´æ–°progressBarï¼ŒåŸ·è¡Œçš„å…§å®¹å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">update</span><span class=\"params\">(progressIncrement: <span class=\"type\">Int</span>, trueProgress: <span class=\"type\">Int</span>)</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(isAnimatingUpdatingDelayed) progressBar.incrementProgressBy(progressIncrement)</span><br><span class=\"line\">    <span class=\"keyword\">else</span> progressBar.progress = trueProgress</span><br><span class=\"line\">    progressBar.secondaryProgress = trueProgress</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>é€™æ®µç¨‹å¼ä¸­ç¬¬äºŒé€²åº¦æ¢æ˜¯åŒæ­¥è·Ÿè‘—timerèµ°ï¼Œè€Œç•¶æ²’æœ‰æ’­æ”¾å‹•ç•«æ™‚ï¼Œä¸»é€²åº¦æ¢äº¦ç„¶ã€‚</p>\n<p>å¦‚æœæ­£åœ¨æ’­æ”¾å‹•ç•«ï¼Œå‰‡ç”±progressIncrementé€™å€‹è®Šæ•¸æ±ºå®šè¦å¢åŠ æˆ–æ¸›å°‘å¤šå°‘å€¼ï¼Œé€™å€‹å€¼å–æ±ºæ–¼ä½ çš„è¨ˆæ™‚å™¨ä»¥åŠprogressçš„æœ€å¤§å€¼å¦‚ä½•è¨­å®šã€‚<br>\né€™é‚Šæ‰€ç‡Ÿé€ çš„æ•ˆæœç‚ºï¼šåœ¨å‹•ç•«é€”ä¸­ï¼Œprogressä»ç„¶æœƒä»¥è¨ˆæ™‚å™¨è©²æœ‰çš„é€Ÿåº¦éæ¸›ï¼Œè€Œä¸æœƒå®Œå…¨åœä¸‹ä¾†ã€‚<br>\nä»¥æ­¤ç¯‡æ–‡ç« ç‚ºä¾‹å­ï¼Œæ¯0.01ç§’æ›´æ–°ä¸€æ¬¡ï¼Œæ¯æ¬¡æ›´æ–°progressçš„æ•¸å€¼æœƒæ¸›1ï¼Œä¹Ÿå°±æ˜¯<code>progressIncrement=-1</code>ã€‚</p>\n<h3 id=\"æ™‚é–“æ¢å¢åŠ æ™‚-å»¶é²æ›´æ–°çš„å‹•ç•«\"><a class=\"header-anchor\" href=\"#æ™‚é–“æ¢å¢åŠ æ™‚-å»¶é²æ›´æ–°çš„å‹•ç•«\">Â¶</a>æ™‚é–“æ¢å¢åŠ æ™‚ï¼Œå»¶é²æ›´æ–°çš„å‹•ç•«</h3>\n<p>å…ˆæ”¾ä¸Šç¨‹å¼ç¢¼ï¼š</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">animateUpdatingDelayed</span><span class=\"params\">(delayTime: <span class=\"type\">Long</span>)</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!isAnimatingUpdatingDelayed)&#123;</span><br><span class=\"line\">        isAnimatingUpdatingDelayed = <span class=\"literal\">true</span></span><br><span class=\"line\">        Thread&#123;</span><br><span class=\"line\">            Thread.sleep(delayTime)</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (i <span class=\"keyword\">in</span> <span class=\"number\">1</span>..<span class=\"number\">9</span>)&#123;</span><br><span class=\"line\">                progressBar.progress =</span><br><span class=\"line\">                        (progressBar.progress +</span><br><span class=\"line\">                                (progressBar.secondaryProgress - progressBar.progress)* i /<span class=\"number\">10</span>)</span><br><span class=\"line\">                Thread.sleep(<span class=\"number\">50</span>)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            progressBar.progress = progressBar.secondaryProgress</span><br><span class=\"line\">            isAnimatingUpdatingDelayed = <span class=\"literal\">false</span></span><br><span class=\"line\">        &#125;.start()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è¨­è¨ˆæ€è·¯æ˜¯ï¼šé–‹ä¸€å€‹threadéš¨è‘—æ™‚é–“ä¸€æ®µä¸€æ®µæ›´æ–°progressçš„å€¼ã€‚</p>\n<p>é–‹é ­æœ‰å€‹å¸ƒçˆ¾å€¼è¦å®šä¸€æ¬¡åªèƒ½å­˜åœ¨ä¸€å€‹å»¶é²å‹•ç•«ç”¨çš„threadï¼Œé¿å…å¤šå€‹threadæ§åˆ¶åŒå€‹ç‰©ä»¶æ‰€é€ æˆçš„crashã€‚</p>\n<p>åœ¨threadä¸­ï¼Œé¦–å…ˆå…ˆç­‰å¾…ä¸€æ®µæ™‚é–“ï¼Œæ¥ä¸‹ä¾†å°‡progressä»¥åŠsecondaryProgressä¹‹é–“çš„å·®å€¼åˆ†æˆ10ç­‰ä»½ä¾æ¬¡æ›´æ–°ï¼Œæ›´æ–°é–“éš”ç‚º50 msã€‚<br>\nç”±æ–¼å…ˆå‰çš„<code>fun update()</code>ä»ç„¶æœƒä¸åœçš„è¢«è¨ˆæ™‚å™¨å‘¼å«ï¼Œå› æ­¤æ¯æ¬¡æ›´æ–°éƒ½å¿…é ˆé‡æ–°è¨ˆç®—ä¸€æ¬¡ã€‚<br>\nåœ¨threadé‹è¡Œä¸­æ™‚ï¼ŒsecondaryProgressæ˜¯å…è¨±è¢«æ”¹è®Šçš„ã€‚åœ¨é€™æ®µæ™‚é–“å…§å†æ¬¡æŒ‰æŒ‰éˆ•secondaryProgressæœƒå†åº¦è¢«æ›´æ–°ï¼Œå› æ¬¡progresså¿…é ˆæ›´å¿«é€Ÿçš„è¿½ä¸Šå»ã€‚</p>\n<p>ç¨‹å¼ç¢¼ç•¶ä¸­æœ‰äº›Magic number(ä¾‹å¦‚åˆ†æˆ10ç­‰ä»½)ï¼Œçœ‹å®˜æœ‰èˆˆè¶£å¯ä»¥å°‡é€™äº›æ•¸å­—åŒ…æˆä¸€å€‹åŠŸèƒ½ ğŸ˜‹</p>\n<h2 id=\"1\">é–ƒçˆå‹•ç•«</h2>\n<p>androidä¸­çš„Viewå±¬æ€§å‹•ç•«æœ€åŸºæœ¬çš„åƒ…æœ‰ç§»å‹•ã€æ—‹è½‰ã€ç¸®æ”¾ã€æ·¡å…¥æ·¡å‡ºï¼Œä¸¦æ²’æœ‰èƒ½æ”¹è®Šå·²ç¹ªè£½ç‰©ä»¶ã€Œè‰²èª¿ã€çš„å‹•ç•«ã€‚</p>\n<!-- Showå€‹RPGè£½ä½œå¤§å¸«æ”¹è®Šè‰²èª¿çš„æ•ˆæœ -->\n<p>èœé€¼å…«çš„æˆ‘æƒ³åˆ°é€™å¹¾ç¨®ç­–ç•¥ï¼š</p>\n<ul>\n<li>1.åœ¨æ¬²é–ƒçˆçš„ç‰©ä»¶ä¸Šå†ç¹ªè£½ä¸€å±¤ä¸€æ¨¡ä¸€æ¨£çš„ç‰©ä»¶ï¼Œæ”¹è®Šè©²ç‰©ä»¶çš„é¡è‰²ä¸¦ä½¿ç”¨æ·¡å…¥æ·¡å‡ºå‹•ç•«</li>\n<li>2.åœ¨æ¬²é–ƒçˆçš„ç‰©ä»¶ä¸Šå¥—ä¸ŠColorFilterï¼Œéš¨è‘—æ™‚é–“æ”¹è®ŠFilterçš„æ•¸å€¼ã€‚</li>\n<li>3.è£½ä½œä¸€å€‹å®¢è£½åŒ–çš„Viewç¹¼æ‰¿è‡ªProgressBarï¼Œè©²Viewå†å¤šç¹ªè£½ä¸€å±¤é®ç½©ï¼Œä¸¦ä¸”å°é®ç½©ä½¿ç”¨æ·¡å…¥æ·¡å‡ºå‹•ç•«ã€‚</li>\n</ul>\n<p>ç”±æ–¼æ–¹æ¡ˆä¸€ä¼¼ä¹æœ‰é»è ¢ï¼Œæ–¹æ¡ˆä¸‰æˆ‘â€¦é‚„ä¸æœƒğŸ˜…ï¼Œåœ¨é€™è£¡æˆ‘å€‘ä½¿ç”¨æ–¹æ¡ˆäºŒã€‚</p>\n<p>å…ˆæ”¾ä¸Šç¨‹å¼ç¢¼ï¼š</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">progressShining</span><span class=\"params\">(isDarker:<span class=\"type\">Boolean</span> = <span class=\"literal\">false</span>, shiningTime: <span class=\"type\">Long</span> = <span class=\"number\">1000</span>, shiningDegree: <span class=\"type\">Float</span> = <span class=\"number\">0.25</span>f)</span></span>&#123;</span><br><span class=\"line\">    animStepShining = <span class=\"number\">0</span></span><br><span class=\"line\">    mShiningTime = shiningTime/<span class=\"number\">20</span></span><br><span class=\"line\">    mShiningDegree = shiningDegree</span><br><span class=\"line\">    mIsDarker = isDarker</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(!isAnimatingShining)&#123;</span><br><span class=\"line\">        isAnimatingShining = <span class=\"literal\">true</span></span><br><span class=\"line\">        Thread&#123;</span><br><span class=\"line\">            <span class=\"keyword\">while</span>(animStepShining&lt;animMaxStepShining)&#123;</span><br><span class=\"line\">                <span class=\"keyword\">val</span> step : <span class=\"built_in\">Float</span> = <span class=\"keyword\">when</span>(mIsDarker)&#123;</span><br><span class=\"line\">                    <span class=\"literal\">true</span>-&gt; <span class=\"keyword\">when</span>(animMaxStepShining &lt; <span class=\"number\">3</span>)&#123;</span><br><span class=\"line\">                        <span class=\"literal\">true</span> -&gt; <span class=\"number\">1</span> - (mShiningDegree * (animStepShining.toFloat())/<span class=\"number\">3</span>)</span><br><span class=\"line\">                        <span class=\"literal\">false</span> -&gt; <span class=\"number\">1</span> - mShiningDegree + (mShiningDegree * ((animStepShining-<span class=\"number\">3</span>).toFloat())/<span class=\"number\">17</span>)</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                    <span class=\"literal\">false</span>-&gt; <span class=\"keyword\">when</span>(animMaxStepShining &lt; <span class=\"number\">3</span>)&#123;</span><br><span class=\"line\">                        <span class=\"literal\">true</span> -&gt; <span class=\"number\">1</span> + (mShiningDegree * (animStepShining.toFloat())/<span class=\"number\">3</span>)</span><br><span class=\"line\">                        <span class=\"literal\">false</span> -&gt; <span class=\"number\">1</span> + mShiningDegree - (mShiningDegree * ((animStepShining-<span class=\"number\">3</span>).toFloat())/<span class=\"number\">17</span>)</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">val</span> colorFilter = ColorMatrixColorFilter(</span><br><span class=\"line\">                    floatArrayOf(</span><br><span class=\"line\">                        <span class=\"number\">1f</span>*step,<span class=\"number\">0f</span>,<span class=\"number\">0f</span>,<span class=\"number\">0f</span>,<span class=\"number\">0f</span>,</span><br><span class=\"line\">                        <span class=\"number\">0f</span>,<span class=\"number\">1f</span>*step,<span class=\"number\">0f</span>,<span class=\"number\">0f</span>,<span class=\"number\">0f</span>,</span><br><span class=\"line\">                        <span class=\"number\">0f</span>,<span class=\"number\">0f</span>,<span class=\"number\">1f</span>*step,<span class=\"number\">0f</span>,<span class=\"number\">0f</span>,</span><br><span class=\"line\">                        <span class=\"number\">0f</span>,<span class=\"number\">0f</span>,<span class=\"number\">0f</span>,<span class=\"number\">1f</span>,<span class=\"number\">0f</span></span><br><span class=\"line\">                    )</span><br><span class=\"line\">                )</span><br><span class=\"line\">                <span class=\"comment\">// To avoid thread conflicting OxO</span></span><br><span class=\"line\">                handlerUI.post&#123;progressBarDrawable.colorFilter = colorFilter&#125;</span><br><span class=\"line\">                animStepShining ++</span><br><span class=\"line\">                Thread.sleep(mShiningTime)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(animStepShining&gt;=animMaxStepShining)&#123;</span><br><span class=\"line\">                handlerUI.post&#123;progressBarDrawable.clearColorFilter()&#125;</span><br><span class=\"line\">                isAnimatingShining = <span class=\"literal\">false</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;.start()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è¨­è¨ˆæ€è·¯é›·åŒæ–¼å»¶é²å‹•ç•«ï¼Œä¸éå‹•ç•«åˆ†æˆå…©æ®µã€‚<br>\nä»¥é–ƒç™½å…‰ç‚ºä¾‹ï¼Œç”±20æ¬¡loopä¾†å‘ˆç¾çªç„¶è®Šäº®ä¹‹å¾Œæ¼¸æ¼¸è½‰æš—çš„æ•ˆæœï¼šè®Šäº®(3)-&gt;è®Šæš—(17)ï¼Œè€Œé»‘è‰²é–ƒçˆå‰‡åéä¾†ã€‚</p>\n<p>é–‹é ­ä¸‰å€‹è®Šæ•¸æ˜¯classçš„æˆå“¡ï¼Œå¯«åœ¨functionå¤–ä½¿å¾—è©²ä»–å€‘å¯ä»¥åœ¨threadé‹è¡Œæ™‚è¢«æ”¹è®Šã€‚åŒæ¨£åœ°ï¼Œæœ‰å€‹å¸ƒçˆ¾å€¼è¦å®šä¸€æ¬¡åªèƒ½å­˜åœ¨ä¸€å€‹é–ƒçˆå‹•ç•«ç”¨çš„threadã€‚ç•¶åœ¨é–ƒçˆæœŸé–“å†æ¬¡æŒ‰ä¸‹æŒ‰éˆ•æ™‚ï¼Œæ‰€æœ‰å‹•ç•«é€²åº¦ç›¸é—œçš„è®Šæ•¸æœƒè¢«é‡ç½®ï¼Œå†æ¬¡æ’­æ”¾å…¨æ–°çš„é–ƒçˆå‹•ç•«ã€‚</p>\n<p>ç°¡å–®çš„è§£é‡‹ä¸€ä¸‹ColorMatrixçš„é‹ä½œåŸç†ã€‚<br>\nåœ¨Android drawableä¸­ï¼ŒColorFilterå…±åˆ†æˆä¸‰ç¨®ï¼š<br>\nColorMatrixColorFilterã€LightingColorFilterã€PorterDuffColorFilter</p>\n<p>æœ¬ç¯‡ä½¿ç”¨çš„ColorMatrixå¿…é ˆé…åˆä»¥ä¸‹å…¬å¼è½‰æ›æ•´å€‹drawableçš„åƒç´ é¡è‰²ï¼š</p>\n<div class=\"article-img\"><p><img src=\"https://i.imgur.com/20YcKH6.png\" alt=\"\" width=\"300\" height=\"200\"></p></div>\n<p>ä»¥ç™½å…‰é–ƒçˆç‚ºä¾‹ï¼Œä¸æ”¹è®ŠAlphaå€¼ï¼Œæœ€äº®çš„ç™½è‰²ç‚º<code>(R,G,B)=(1f,1f,1f)</code><sup class=\"footnote-ref\"><a href=\"#fn2\" id=\"fnref2\">[2]</a></sup>ï¼Œå› æ­¤ColorMatrixè¨­è¨ˆæˆä½¿å¾—æ”¹è®Šå¾Œçš„è‰²å½©ç‚ºåŸè‰²å½©å€¼ä¸€åŒä¹˜ä¸Šå¤§æ–¼ä¸€çš„å€¼ï¼Œä¸¦ä¾ç…§å‹•ç•«é€²ç¨‹è¨ˆç®—ä¹˜ä¸Šçš„å¤§å°ã€‚è€Œè®Šæš—å‰‡åéä¾†ä¹˜ä¸Šå°æ–¼ä¸€çš„å€¼ã€‚</p>\n<div class=\"article-img\"><p><img src=\"https://i.imgur.com/Bai5vHW.png\" alt=\"\" width=\"300\" height=\"200\"></p></div>\n<p>ç°¡åŒ–æˆä¸Šé¢çš„å¼å­ï¼Œç™½å…‰é–ƒçˆæ‰€ç”¨çš„å€¼ç‚º R<sub>R</sub> = G<sub>G</sub> = B<sub>B</sub> &gt; 1ã€‚</p>\n<p>å¦‚æœæƒ³æ”¹æˆå…¶ä»–çš„é–ƒçˆé¡è‰²ï¼Œåªè¦èª¿æ•´ R<sub>R</sub> , G<sub>G</sub>, B<sub>B</sub> ä¹‹é–“çš„æ¯”ä¾‹å°±å¯ä»¥äº†ã€‚</p>\n<p>è€Œå…¶ä»–å…©ç¨®ä¸æœƒç”¨åˆ°çš„åŠŸèƒ½ç°¡å–®åœ°èªªï¼š</p>\n<ul>\n<li>LightingColorFilter: ColorMatrixç‰¹å®šå…¬å¼çš„ç‰ˆæœ¬ï¼Œç­‰åŒæ–¼æˆ‘å€‘è®Šäº®è®Šæš—æ‰€ä½¿ç”¨çš„å¼å­å†åŠ ä¸Š(R<sub>C</sub>,G<sub>C</sub>,B<sub>C</sub>)é€™ä¸€é …</li>\n<li>PorterDuffColorFilter: ä¾ç…§ä¸åŒçš„æ¨¡å¼å°‡ç‰¹å®šç¯„åœçš„é¡è‰²æ›¿æ›ã€‚ç”±æ–¼ä¸æ›‰å¾—é–ƒå…‰é¡è‰²çš„æ¼¸è®Šæ™‚æ‰€å‘ˆç¾çš„æ¯ä¸€ç¨®é¡è‰²ï¼Œæ•…ç„¡æ³•å¯¦ç¾æˆ‘å€‘æƒ³è¦çš„æ•ˆæœã€‚è€Œé¡è‰²çš„alphaå€¼åªæœƒè®“åŸç‰©ä»¶è®ŠæˆåŠé€æ˜ï¼ŒèƒŒæ™¯æœƒé€å‡ºä¾†ã€‚</li>\n</ul>\n<p>è¼ƒè©³ç´°çš„èªªæ˜å¯ä»¥åƒè€ƒ<a href=\"https://blog.csdn.net/allen315410/article/details/45059989\" target=\"_blank\" rel=\"noopener\">é€™ä¸€ç¯‡</a>ã€‚</p>\n<h2 id=\"çµèª\"><a class=\"header-anchor\" href=\"#çµèª\">Â¶</a>çµèª</h2>\n<p>å°‡ä»¥ä¸Šå…©ç¨®å‹•ç•«çµåˆèµ·ä¾†å³å¯å‘ˆç¾å‡ºæ–‡ç« é–‹é ­çš„å‹•ç•«æ•ˆæœã€‚<br>\næ–¹æ³•è€å¯¦èªªæœ‰é»ç²—ç³™ğŸ˜–ï¼Œä¹Ÿè¨±æ¯”è¼ƒç†æƒ³çš„æ–¹å¼æ˜¯å®¢è£½åŒ–çš„Viewï¼Œä¸éè¡¨ç¾ä¹Ÿç®—ä»¤äººæ»¿æ„(å§?)</p>\n<p>ç¬¬ä¸€æ¬¡å¯«æ–‡ï¼Œè«‹å¤šæŒ‡æ•™ ğŸ˜ƒ</p>\n<hr class=\"footnotes-sep\">\n<section class=\"footnotes\">\n<ol class=\"footnotes-list\">\n<li id=\"fn1\" class=\"footnote-item\"><p>Android API &gt; 24 æä¾›äº†<code>setProgress(int progress, boolean animate)</code>é€™å€‹æ–¹æ³•ä¾†è¨­å®šé€²åº¦æ¢æ›´æ–°çš„å‹•ç•«ï¼Œä¸éåªèƒ½é¸æ“‡é–‹å•Ÿè·Ÿé—œé–‰ï¼Œè€Œä¸”å‹•ç•«çš„æ™‚é–“é•·åº¦æ˜¯å›ºå®šçš„(80ms)ã€‚ <a href=\"#fnref1\" class=\"footnote-backref\">â†©ï¸</a></p>\n</li>\n<li id=\"fn2\" class=\"footnote-item\"><p>1fä¸­çš„fä»£è¡¨æµ®é»æ•¸çš„æ„æ€ã€‚ä½¿ç”¨æ•´æ•¸è¡¨é”å‰‡(R,G,B)=(255,255,255)(32bit æ·±åº¦) <a href=\"#fnref2\" class=\"footnote-backref\">â†©ï¸</a></p>\n</li>\n</ol>\n</section>\n","next":{"title":"Markdown-it æ¸²æŸ“å™¨æ¸¬è©¦","slug":"MarkDownItTest"},"link":"http://yoursite.com/post/android-progress-bar/"}